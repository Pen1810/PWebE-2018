function check_wishlist_hmac(param){var data={};var callback=param["callback"];data.p_id=param.p_id;data.action='event_get_check_wishlist_key';$.ajax({url:'/ajax/wishlist.pl',global:false,type:"GET",dataType:"json",data:data,success:function(result){if(result&&result.user_id!="0"){param.result=result;_check_wishlist(param);}},error:function(XMLHttpRequest,textStatus,errorThrown){if(callback!=undefined&&callback.error!=undefined){callback.error();}},beforeSend:function(){if(callback!=undefined&&callback.beforeSend!=undefined){callback.beforeSend();}
tokopedia.process_ajax();},complete:function(){if(callback!=undefined&&callback.complete!=undefined){callback.complete();}}});}
function _check_wishlist(param){var result=param.result;var callback=param.callback;var headers={'Authorization':result.wishlist_check_key,'Content-Type':'application/json','X-Date':result.wishlist_auth_date,'X-User-ID':result.user_id,'X-Device':'desktop-0.0'};$.ajax({url:result.wishlist_check_url,global:false,type:"GET",dataType:"json",headers:headers,success:function(result){if(callback!=undefined&&callback.success!=undefined){callback.success(result);}},error:function(XMLHttpRequest,textStatus,errorThrown){if(callback!=undefined&&callback.error!=undefined){callback.error();}},complete:function(){if(callback!=undefined&&callback.complete!=undefined){callback.complete();}}});}
function update_wishlist_hmac(param){var data={};var callback=param.callback;data.p_id=param.p_id;data.action='event_get_update_wishlist_key';data.mtd=param.method;if(param.method=="POST"){if(param.ref){data.ref=param.ref;}
if(param.type){data.type=param.type;}}
$.ajax({url:'/ajax/wishlist.pl',global:false,type:"GET",dataType:"json",data:data,success:function(result){if(result&&result.user_id!="0"){param.result=result;_update_wishlist(param);}else{window.location='/login.pl';}},error:function(XMLHttpRequest,textStatus,errorThrown){if(callback!=undefined&&callback.error!=undefined){callback.error();}},beforeSend:function(){if(callback!=undefined&&callback.beforeSend!=undefined){callback.beforeSend();}},complete:function(){if(callback!=undefined&&callback.complete!=undefined){callback.complete();}}});}
function _update_wishlist(param){var result=param.result;var callback=param.callback;var headers={'Authorization':result.wishlist_update_key,'Content-Type':'application/json','X-Date':result.wishlist_auth_date,'X-User-ID':result.user_id,'X-Device':'desktop-0.0'};$.ajax({url:result.wishlist_update_url,global:false,type:param.method,headers:headers,success:function(result){if(callback!=undefined&&callback.success!=undefined){callback.success();}},error:function(xhr,status,err){var errMsg=$.parseJSON(xhr.responseText);if(typeof(errMsg.message_error)!=='undefined'){var message='<div class="alert alert-error">'+errMsg.message_error[0]+'</div>';tokopedia.alert('Gagal menambah wishlist',message,false);}else{tokopedia.alert_error();}
callback.error();},complete:function(){if(callback!=undefined&&callback.complete!=undefined){callback.complete();}}});}var is_success=0;var History=window.History;var adsinitload=false;url_action=host_tome+'/shop/favorite-shop';var wishlist_add_key,wishlist_delete_key,wishlist_auth_date,wishlist_update_url="";var is_pdp_page=true;History.Adapter.bind(window,'statechange',function(){var dt=new Object();var State=History.getState();var state_data=State.data;var url=State.url;var uri=parseUri(url);var uri_path=uri.path;var qs=uri.query;dt.action='reload_data';dt.uri_path=uri_path;dt.qs=qs;var this_prod_id=$('.container-product').attr('id');var this_id_obj=this_prod_id.split('-');dt.p_id=this_id_obj.pop();var trigger=state_data.trigger;if(trigger){dt.trigger=trigger;}
if(!(State.data.other_product)){reload_data_new(dt);}});function reload_data_new(dt){var trigger=dt.trigger;if(tokopedia.processAjax==0){$.ajax({url:'/ajax/product-e4.pl',global:false,type:"GET",data:(dt),dataType:"json",success:function(result){if(result.message_error){var message_error=tokopedia.render_message('error',result.message_error);tokopedia.alert(tokopedia.loc('ERROR'),message_error);}
else if(result.success){is_success=1;if(trigger=='talk_paging'){if(result.content.talk){$('#product-talk-container').replaceWith(result.content.talk);init_expand();}}
if(trigger=='review_paging'||trigger=='review_filter'){if(result.content.review){if(trigger=='review_filter'){$('.product-content-container').html(result.content.review);if(dt.auto_focus_element){tokopedia.focus_element('.focus-filter-star',1);}}
else{$('#product-review-container').replaceWith(result.content.review);}
init_expand();init_dropdown();init_tooltip();}
init_helpful_counter();init_carousel();}
if(trigger=='gallery_paging'){if(result.content.gallery_detail){$('.main-image-gallery img').attr('src',result.content.gallery_detail.img_src).attr('alt',result.content.gallery_detail.img_desc_enc).attr('title',result.content.gallery_detail.img_desc_enc);}
if(result.content.gallery_next_page){$('.main-image-gallery a').attr('href',result.content.gallery_next_page);}}
if(trigger=='op_paging'){if(result.content.other_product){$('#other-product').replaceWith(result.content.other_product);}}}
else{tokopedia.alert_error();}},error:function(XMLHttpRequest,textStatus,errorThrown){},beforeSend:function(){if(trigger=='talk_paging'||trigger=='review_paging'||trigger=='gallery_paging'||trigger=='op_paging'||trigger=='review_filter'){tokopedia.show_ajax_loader();}
tokopedia.process_ajax();},complete:function(){if(trigger=='talk_paging'||trigger=='review_paging'||trigger=='gallery_paging'||trigger=='op_paging'||trigger=='review_filter'){tokopedia.remove_ajax_loader();if(trigger=='gallery_paging'){tokopedia.focus_element('#main-image-gallery');}
else if(trigger=='talk_paging'){tokopedia.focus_element('#product-talk-container');}
else if(trigger=='review_paging'||trigger=='review_filter'){tokopedia.focus_element('#product-review-container');tokopedia.init_select();}}
tokopedia.init_select();tokopedia.clear_process_ajax();if(trigger=='talk_paging'){if(is_success){init_comment();}}
is_success=0;}});}}
function init_gallery(){$('.jcarousel').jcarousel();$('[data-jcarousel-control]').each(function(){var el=$(this);el.jcarouselControl(el.data());});if($(".jcarousel ul li").size()<=4){$('[data-jcarousel-control]').hide();}else{$('[data-jcarousel-control]').show();}}
$('#prod-img-primary').unbind('click').bind('click',function(e){var xzoom=$(this).data('xzoom');var thumb=$(".product-imagethumb-alt img");var gallery=xzoom.gallery().ogallery;var i,images=new Array();for(i in gallery){images[i]={src:gallery[i],title:thumb[i].title};}
$(document).keyup(function(e){if(e.keyCode==27){var mfp=$.magnificPopup.instance;$('.mfp-preloader').detach();mfp.contentContainer.detach();$('.mfp-ready').detach();$('html').attr('style','');}});$.magnificPopup.open({items:images,mainClass:'mfp-pdp',preloader:false,type:'image',gallery:{enabled:true},closeOnBgClick:false,image:{titleSrc:'title',markup:'<div class="mfp-figure">'+
'<div class="mfp-close"></div>'+
'<figure>'+
'<figcaption>'+
'<div class="mfp-top-bar">'+
'<div class="mfp-title"></div>'+
'</div>'+
'</figcaption>'+
'<div class="mfp-img"></div>'+
'<figcaption>'+
'<div class="mfp-bottom-bar">'+
'<div class="mfp-counter"></div>'+
'</div>'+
'</figcaption>'+
'</figure>'+
'</div>'},callbacks:{buildControls:function(){if(this.arrowLeft){var node1=document.createElement("div");node1.className='mfp-nav-container';var node2=document.createElement("div");node2.className='mfp-nav-wrapper';node2.append(this.arrowLeft[0]);node2.append(this.arrowRight[0]);node1.append(node2);this.contentContainer.append(node1);}}}},xzoom.gallery().index);$('body').removeClass("mfp-zoom-out-cur");$('.mfp-close').unbind('click').bind('click',function(e){var mfp=$.magnificPopup.instance;$('.mfp-preloader').detach();$('.mfp-ready').detach();mfp.contentContainer.detach();$('html').attr('style','');})});function get_all_etalase(){var obj=$(this);var ld=obj.find('li.loading');if(ld.length==1&&tokopedia.processAjax==0){var dt=new Object();dt.action='get_other_etalase';var elem_id=obj.attr('id');var arr_elem_id=elem_id.split('-');dt.menu_id=arr_elem_id.pop();dt.s_id=arr_elem_id.pop();$.ajax({url:'/ajax/product-e4.pl',global:false,type:"GET",data:(dt),dataType:"json",success:function(result){if(result.other_etalase){obj.find('.product-etalasedrop').html(result.other_etalase);}
$(document).off("mouseenter",".product-navetalase");},error:function(XMLHttpRequest,textStatus,errorThrown){},beforeSend:function(){tokopedia.processAjax++;},complete:function(){tokopedia.processAjax=0;}});}}
function init_wishlist(){var add_wishlist=$('#btn-wish-add');var remove_wishlist=$('#btn-wish-remove');var p_id=$('.container-product').attr('id').split('-').pop();var param=new Object();var callback=new Object();callback.beforeSend=function(){tokopedia.process_ajax();};callback.complete=function(){tokopedia.clear_process_ajax();};callback.success=function(result){if(result&&result.data.length>0){if(result.data[0].wishlisted){remove_wishlist.show();add_wishlist.hide();}else{add_wishlist.show();remove_wishlist.hide();}}else{add_wishlist.show();remove_wishlist.hide();}};param.p_id=p_id;param.callback=callback;check_wishlist_hmac(param);}
function add_to_wishlist(){$(document).on('click','#btn-wish-add',function(){if(tokopedia.processAjax==0){var wishlist_add=$('#btn-wish-add');var wishlist_remove=$('#btn-wish-remove');var p_id=$('.container-product').attr('id').split('-').pop();var param={};var callback={};callback.success=function(result){wishlist_remove.show();wishlist_add.hide();var o=$("#is_official");if(o.length==0&&o.val()!="1"){window.dataLayer=window.dataLayer||[];dataLayer.push({'event':'clickWishlist','eventCategory':'Product Detail Page','eventAction':'Click','eventLabel':'Add to wishlist'});}
dataLayer.push({event:'clickWishlist',eventAction:'addWishlist',attributes:{subcategory:moeAttr.subcategory,subcategory_id:moeAttr.subcategory_id,category:moeAttr.category,category_id:moeAttr.category_id,product_name:moeAttr.product_name,product_id:moeAttr.product_id,product_url:moeAttr.product_url,product_price:moeAttr.product_price,is_official_store:moeAttr.is_official_store,quantity:($('#total-item-cart').length>0)?parseInt($('#total-item-cart').text()):0}});};callback.error=function(){wishlist_remove.hide();wishlist_add.show();};callback.beforeSend=function(){tokopedia.processAjax++;wishlist_remove.show();wishlist_add.hide();};callback.complete=function(){tokopedia.processAjax=0;}
param.callback=callback;param.p_id=p_id;param.method="POST";param.type="pdp"
param.ref="pdp"
update_wishlist_hmac(param);}});}
function remove_from_wishlist(){$(document).on('click','#btn-wish-remove',function(){if(tokopedia.processAjax==0){var wishlist_add=$('#btn-wish-add');var wishlist_remove=$('#btn-wish-remove');var p_id=$('.container-product').attr('id').split('-').pop();var param={};var callback={};callback.success=function(result){wishlist_remove.hide();wishlist_add.show();window.dataLayer=window.dataLayer||[];dataLayer.push({event:'clickWishlist',eventAction:'removeWishlist',attributes:{subcategory:moeAttr.subcategory,subcategory_id:moeAttr.subcategory_id,category:moeAttr.category,category_id:moeAttr.category_id,product_name:moeAttr.product_name,product_id:moeAttr.product_id,product_url:moeAttr.product_url,product_deeplink_url:moeAttr.product_deeplink_url,product_image_url:moeAttr.product_image_url,product_price:moeAttr.product_price,shop_id:moeAttr.shop_id}});};callback.error=function(){wishlist_add.hide();wishlist_remove.show();tokopedia.alert_error();}
callback.beforeSend=function(){tokopedia.processAjax++;wishlist_add.show();wishlist_remove.hide();};callback.complete=function(){tokopedia.processAjax=0;}
param.p_id=p_id;param.callback=callback;param.method="DELETE";update_wishlist_hmac(param);}});}
function init_all_etalase(){$(document).on("mouseenter",".product-navetalase",get_all_etalase);}
function resize_add_credit_dialog(){$("#dialog .jqm-inner").width('900px');}
function init_promo(item_id,ad_id,is_enable_ad,item_name,item_image,dep_id){$("#dink-it").click(function(){tokopedia.dialog_close();tokopedia.dialog_clear_message();var dt=new Object();dt.aftershowfunc=resize_add_credit_dialog;tokopedia.dialog_ajax('/ajax/product-e4.pl?action=event_dink_it&p_id='+item_id);return false;});var promoteTopadsCounter=0;var promoteTopadsInterval=setInterval(function(){promoteTopadsCounter++;if(typeof init_topads_dialog==="function"){clearInterval(promoteTopadsInterval);var ad_type=1;var source="dialog_promo_pdp";init_topads_dialog(item_id,ad_id,ad_type,source,item_name,item_image,dep_id);}
if(promoteTopadsCounter>5){clearInterval(promoteTopadsInterval);}},1000);}
function getAttributionList(){var result=new Object();var uri=parseUri(location.href);var qKey=uri.queryKey;if(qKey.at){result.at=decodeURIComponent(qKey.at).replace(/\+/g,' ');}
if(qKey.lt){var lt=decodeURIComponent(qKey.lt).replace(/\+/g,' ');result.lt=lt;}
return result;}
function init_toolbox(){var elem_id=$('.container-product').attr('id');var arr_elem_id=elem_id.split('-');var p_id=arr_elem_id.pop();if($("#promo-btn").length>0){var dl=$.grep(window.dataLayer,function(element,index){return element.contactInfo;});var contactInfo=dl[0].contactInfo;var shop_id=contactInfo.shopId;if(!shop_id){shop_id=ads_auth.shop_id;}
$.ajax({url:product_ads_ajax_go+'/v1/promo/check',type:'GET',timeout:5000,data:{type:1,shop_id:shop_id,item_id:p_id,authorization:ads_auth.promo_check,user_id:ads_auth.user_id,date:ads_auth.date,device:'desktop'},dataType:"json",success:function(result){if(result.data){var ad_id=parseInt(result.data.ad_id);var item_id=parseInt(result.data.item_id);var item_name=result.data.item_name;var item_image=result.data.item_image;var dep_id=result.data.dep_id;var is_enable_ad=0;if(ad_id>0){$("#promo-topads").addClass("edit-topads");$("#moderasi-promo").parent().removeClass('none');}else{$("#promo-topads").addClass("create-topads");$("#topads-microsite").removeClass("hide");}
$("#promo-btn").removeClass("hide");init_promo(item_id,ad_id,is_enable_ad,item_name,item_image,dep_id);}},complete:function(xhr,status){if(status=="error"||status=="timeout"){$("#promo-btn").removeClass("hide");$('#promo-topads').click(function(){var dt=new Object();dt.beforeajaxfunc=function(){$('#dialog #rf').empty();};tokopedia.dialog_xdomain_ajax(manage_ads_ajax_url+'?action=show_not_allowed&src=pdp&',dt);return false;});}}});}
$("#to-prev-etalase").click(function(){if(tokopedia.processAjax==0){var $data=new Object;$data.p_id=p_id;$data.action='change_status_product_pdp';$data.token=$("#token").val();$.ajax({url:'/ajax/product-e4.pl',global:false,type:"POST",data:($data),dataType:"json",success:function(result){if(result.message_error){if(result.must_login){window.location='/login.pl';}
else{var message_error=tokopedia.render_message('error',result.message_error);tokopedia.alert('',message_error);}}
else if(result.success){window.location.reload();}
else{tokopedia.alert_error();}},error:function(XMLHttpRequest,textStatus,errorThrown){tokopedia.alert_error();},beforeSend:function(){tokopedia.processAjax++;tokopedia.show_ajax_loader();},complete:function(){tokopedia.processAjax=0;tokopedia.remove_ajax_loader();}});}
return false;});$("#to-etalase").click(function(){tokopedia.dialog_ajax('/ajax/product-e4.pl?action=show_dialog_to_etalase&p_id='+p_id);return false;});$(document).find('#btn-wish-remove').hover(function(){$(this).html("<i class='icon-remove icon-large mr-10'></i>"+tokopedia.loc("remove_wishlist"));},function(){$(this).html("<i class='icon-checked icon-large mr-10'></i>"+tokopedia.loc("already_in_wishlist"));});$("#btn-atc").click(function(){if(!$(this).hasClass("disabled")){log_atc();var pid=$('.container-product').attr('id').split('-').pop();var addParam=getAttributionList();var atlt=$.param(addParam);var referer="";if(typeof(ref_idx_prod)!='undefined'){referer=encodeURIComponent(ref_idx_prod);tokopedia.dialog_ajax('/ajax/tx/cart.pl?action=show_dialog_add_to_cart&p_id='+pid+'&referer='+referer+'&'+atlt);}else{tokopedia.dialog_ajax('/ajax/tx/cart.pl?action=show_dialog_add_to_cart&p_id='+pid+'&'+atlt);}}
return false;});$("#report-it").click(function(){tokopedia.dialog_ajax('/ajax/product-e4.pl?action=show_dialog_report&type=product&element_id='+p_id);return false;});$("#move-to-warehouse").click(function(){if(tokopedia.processAjax==0){var $data=new Object;$data.p_id=p_id;$data.action='change_status_product_pdp';$data.token=$("#token").val();$.ajax({url:'/ajax/product-e4.pl',global:false,type:"POST",data:($data),dataType:"json",success:function(result){if(result.message_error){if(result.must_login){window.location='/login.pl';}
else{var message_error=tokopedia.render_message('error',result.message_error);tokopedia.alert('',message_error);}}
else if(result.success){window.location.reload();}
else{tokopedia.alert_error();}},error:function(XMLHttpRequest,textStatus,errorThrown){tokopedia.alert_error();},beforeSend:function(){tokopedia.processAjax++;tokopedia.show_ajax_loader();},complete:function(){tokopedia.processAjax=0;tokopedia.remove_ajax_loader();}});}
return false;});}
function init_other(){window.dataLayer=window.dataLayer||[];$(document).on('click','#p-nav-review',()=>{dataLayer.push({event:'clickReview',eventAction:'clickReview',attributes:{subcategory:moeAttr.subcategory,subcategory_id:moeAttr.subcategory_id,category:moeAttr.category,category_id:moeAttr.category_id,product_name:moeAttr.product_name,product_id:moeAttr.product_id,product_url:moeAttr.product_url,product_deeplink_url:moeAttr.product_deeplink_url,product_image_url:moeAttr.product_image_url,product_price:moeAttr.product_price,is_official_store:moeAttr.is_official_store,shop_id:moeAttr.shop_id,shop_name:moeAttr.shop_name}});});$(document).on('click','#p-nav-talk',()=>{dataLayer.push({event:'clickDiscussion',eventAction:'clickDiscussion',attributes:{subcategory:moeAttr.subcategory,subcategory_id:moeAttr.subcategory_id,category:moeAttr.category,category_id:moeAttr.category_id,product_name:moeAttr.product_name,product_id:moeAttr.product_id,product_url:moeAttr.product_url,product_deeplink_url:moeAttr.product_deeplink_url,product_image_url:moeAttr.product_image_url,product_price:moeAttr.product_price,is_official_store:moeAttr.is_official_store,shop_id:moeAttr.shop_id,shop_name:moeAttr.shop_name}});});$("#re-open").click(function(){var elem=$(this);var data_info=new Object();data_info.action='event_re_open';data_info.user_id=ads_auth.user_id;var default_submit_name=$(elem).find('span').html();if(tokopedia.processAjax==0){$.ajax({url:'/ajax/shop.pl',global:false,type:"POST",data:(data_info),dataType:"json",success:function(result){if(result.message_error){var message_error=tokopedia.render_message('error',result.message_error);tokopedia.alert('',message_error);if(result.reload){$(".jqmClose").click(function(){window.location.reload();});}}
else if(result.success){$(".tab-status-shop").remove();}
else{tokopedia.alert_error();}},error:function(XMLHttpRequest,textStatus,errorThrown){},beforeSend:function(){tokopedia.processAjax++;$(elem).find('span').html('Loading...');},complete:function(){tokopedia.processAjax=0;$(elem).find('span').html(default_submit_name);}});}
return false;});var trkid_str=get_trkid_str();if($(".product-container").attr('href')){var url=$(".product-container").attr('href');$(".product-container").attr('href',url+"?trkid="+trkid_str);}
if($(".review-container").attr('href')){var url=$(".review-container").attr('href');$(".review-container").attr('href',url+"?trkid="+trkid_str);}
if($(".talk-container").attr('href')){var url=$(".talk-container").attr('href');$(".talk-container").attr('href',url+"?trkid="+trkid_str);}}
function init_review_box(){$(document).on('change','[name=rating-switch-button]',function(){var parents_div=$(this).parents('.product-reviewsummary');parents_div.find('.reviewsummary-loop').hide();parents_div.find('.'+$(this).val()).show();return false;});$(document).on('change','[name=rating-url-button]',function(){if(tokopedia.processAjax==0){var url=$(this).val();var uri=parseUri(url);var relative=uri.relative;var data_state=new Object();data_state.trigger='review_filter';if(!History.enabled){location.href=relative;}
else{History.pushState(data_state,document.title,relative);}}
return false;});}
function close_dropdown(){$('.product-navetalase.dropdown').removeClass('open');}
function init_dropdown(){$(document).on("mouseenter",'.product-navetalase.dropdown',function(){$(this).addClass('open');});$(document).on("mouseleave",'.product-navetalase.dropdown',function(){setTimeout('close_dropdown()',200);});}
var p_id;var s_id;var price;$(document).ready(function(){p_id=$('.container-product').attr('id').split('-').pop();init_variant();init_review_box();init_gallery();init_wishlist();init_all_etalase();init_toolbox();init_other();init_dropdown();add_to_wishlist();remove_from_wishlist();init_installment();init_fave_button();init_promo_widget();$("#shop-name-info").tooltip();var this_shop_id=$('.product-content-container').attr('id');if(this_shop_id){var this_id_obj=this_shop_id.split('-');s_id=this_id_obj.pop();}
$('#safe-shop').click(function(){tokopedia.dialog_ajax('/ajax/general.pl?action=show_dialog_safe_shop');return false;});$('.cursor-default').tooltip();$('.icon-tooltip').tooltip();$('.transaction-tooltip-shop').tooltip();$('.p_title').tooltip();Socialite.load();do_unfollow();var today=new Date();var menit=today.getMinutes();var hour=today.getHours();var dd=today.getDate();var mm=today.getMonth()+1;var yyyy=today.getFullYear();var mmdd=mm*1000000+dd*10000+hour*100+menit;var yymmdd=yyyy*100000000+mmdd;$('#trigger-instalpayment').show();$('#cicilan_feb').show();$('.trigger-tooltip').click(function(){$('.modal.cicilan_feb').show();$('body').css('overflow','hidden');$('.dialog-close').click(function(){$('.modal.cicilan_feb').hide();$('body').css('overflow','auto');})});$('.tabInstallment li[data-tab]').click(function(){var tab=$(this).data('tab');$(this).siblings().removeClass('tabActive');$(this).addClass('tabActive');$("[data-content="+tab+"]").show();$("[data-content="+tab+"]").removeClass('none');$("[data-content="+tab+"]").siblings().hide();});});function init_installment(){price=$('#product_price_int').val();var selected_id=bank_list[0].id;for(var i=0,len=bank_list.length;i<len;i++){if(terms[bank_list[i].id]&&terms[bank_list[i].id][24]){selected_id=bank_list[i].id;break;}}
update_cicilan_price(price,selected_id);get_price_table(price);get_min_purchase();setTimeout(function(){var lebar=$('#cicil_3_bulan').parent('.pull-right').width();var margin=$('.product-instalment-price').width()-(lebar+25);$('.product-instalment-price > span.pull-left').css('margin-left',margin+'px');var lebar_new=$('#cicil_new_3bln').width();var margin_new=$('.span5.m-0.product-instalment-month').width()-(lebar_new+30);if(margin_new<0){margin_new=0;}
$('.installment-new-price').css('margin-left',margin_new+'px');},300);$(window).resize(function(event){var lebar=$('#cicil_3_bulan').parent('.pull-right').width();var margin=$('.product-instalment-price').width()-(lebar+25);$('.product-instalment-price > span.pull-left').css('margin-left',margin+'px');var lebar_new=$('#cicil_new_3bln').width();var margin_new=$('.span5.m-0.product-instalment-month').width()-(lebar_new+30);if(margin_new<0){margin_new=0;}
$('.installment-new-price').css('margin-left',margin_new+'px');});var cicil_3_bulan=Math.ceil((price/3)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");var cicil_6_bulan=Math.ceil((price/6)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");var cicil_12_bulan=Math.ceil((price/12)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");var cicil_18_bulan=Math.ceil((price/18)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");var cicil_24_bulan=Math.ceil((price/24)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");$('#cicil_3_bulan').html(cicil_3_bulan);$('#cicil_6_bulan').html(cicil_6_bulan);$('#cicil_12_bulan').html(cicil_12_bulan);$('#cicil_18_bulan').html(cicil_18_bulan);$('#cicil_24_bulan').html(cicil_24_bulan);if($(".product-instalment-payment__list").text()==""){$('.select-bank').before('<div class="row-fluid" id="installment-alert-temp"><div class="span12 product-instalment-payment__list">'+tokopedia.loc('INSTALLMENT_NOTE_TEMP')+'</div></div>');$('#bank-installment').prepend($('<option>',{value:0,text:''}));}
$('#bank-installment').click(function(event){$('#bank-installment').msDropDown().data('dd').remove(0);$('#installment-alert-temp').remove();$(this).off(event);});$('#bank-installment').change(function(event){if($(this).val()!=0){update_cicilan_price(price,$(this).val());}});$('#bank-installment').msDropDown({openDirection:'alwaysDown'}).data('dd').set('selectedIndex',0);try{$(".select-bank select").msDropDown();}catch(e){alert(e.message);}
$(".select-bank .dd .ddChild li img, .select-bank .dd .ddTitle .ddTitleText img").removeClass('fnone');$(".select-bank").change(function(){$(".select-bank .dd .ddChild li img, .select-bank .dd .ddTitle .ddTitleText img").removeClass('fnone');});$(".dd.ddcommon.borderRadius").css("width");}
function update_cicilan_price(harga,bank){var harga_3_bln=hitung_cicilan(harga,bank,3);if(harga_3_bln!='-'){if(terms[bank][3]["percentage"]==0){$('#installment_text_3').html(tokopedia.loc('zero_percent_interest'));}else{$('#installment_text_3').html(tokopedia.loc('low_interest'));}
$('#cicil_new_3bln').prev('span').show();$('#cicil_new_3bln').html(harga_3_bln.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")).show();$('#cicil_new_3bln').next('span').hide();}else{$('#installment_text_3').html(tokopedia.loc('zero_percent_interest'));$('#cicil_new_3bln').prev('span').hide();$('#cicil_new_3bln').hide();$('#cicil_new_3bln').next('span').show();}
var harga_6_bln=hitung_cicilan(harga,bank,6);if(harga_6_bln!='-'){if(terms[bank][6]["percentage"]==0){$('#installment_text_6').html(tokopedia.loc('zero_percent_interest'));}else{$('#installment_text_6').html(tokopedia.loc('low_interest'));}
$('#cicil_new_6bln').prev('span').show();$('#cicil_new_6bln').html(harga_6_bln.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")).show();$('#cicil_new_6bln').next('span').hide();}else{$('#installment_text_6').html(tokopedia.loc('zero_percent_interest'));$('#cicil_new_6bln').prev('span').hide();$('#cicil_new_6bln').hide();$('#cicil_new_6bln').next('span').show();}
var harga_12_bln=hitung_cicilan(harga,bank,12);if(harga_12_bln!='-'){if(terms[bank][12]["percentage"]==0){$('#installment_text_12').html(tokopedia.loc('zero_percent_interest'));}else{$('#installment_text_12').html(tokopedia.loc('low_interest'));}
$('#cicil_new_12bln').prev('span').show();$('#cicil_new_12bln').html(harga_12_bln.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")).show();$('#cicil_new_12bln').next('span').hide();}else{$('#installment_text_12').html(tokopedia.loc('zero_percent_interest'));$('#cicil_new_12bln').prev('span').hide();$('#cicil_new_12bln').hide();$('#cicil_new_12bln').next('span').show();}
var harga_18_bln=hitung_cicilan(harga,bank,18);if(harga_18_bln!='-'){if(terms[bank][18]["percentage"]==0){$('#installment_text_18').html(tokopedia.loc('zero_percent_interest'));}else{$('#installment_text_18').html(tokopedia.loc('low_interest'));}
$('#cicil_new_18bln').prev('span').show();$('#cicil_new_18bln').html(harga_18_bln.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")).show();$('#cicil_new_18bln').next('span').hide();}else{$('#installment_text_18').html(tokopedia.loc('zero_percent_interest'));$('#cicil_new_18bln').prev('span').hide();$('#cicil_new_18bln').hide();$('#cicil_new_18bln').next('span').show();}
var harga_24_bln=hitung_cicilan(harga,bank,24);if(harga_24_bln!='-'){if(terms[bank][24]["percentage"]==0){$('#installment_text_24').html(tokopedia.loc('zero_percent_interest'));}else{$('#installment_text_24').html(tokopedia.loc('low_interest'));}
$('#cicil_new_24bln').prev('span').show();$('#cicil_new_24bln').html(harga_24_bln.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")).show();$('#cicil_new_24bln').next('span').hide();}else{$('#installment_text_24').html(tokopedia.loc('zero_percent_interest'));$('#cicil_new_24bln').prev('span').hide();$('#cicil_new_24bln').hide();$('#cicil_new_24bln').next('span').show();}}
function get_min_purchase(){for(var i=0;i<bank_list.length;i++){$('#min_purchase_3bln_'+bank_list[i].id).html(min_purchase(bank_list[i].id,3).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));$('#min_purchase_6bln_'+bank_list[i].id).html(min_purchase(bank_list[i].id,6).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));$('#min_purchase_12bln_'+bank_list[i].id).html(min_purchase(bank_list[i].id,12).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));$('#min_purchase_18bln_'+bank_list[i].id).html(min_purchase(bank_list[i].id,18).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));$('#min_purchase_24bln_'+bank_list[i].id).html(min_purchase(bank_list[i].id,24).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));}}
function get_price_table(harga){for(var i=0;i<bank_list.length;i++){$('#price_table_3bln_'+bank_list[i].id).html(hitung_cicilan(harga,bank_list[i].id,3).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));$('#price_table_6bln_'+bank_list[i].id).html(hitung_cicilan(harga,bank_list[i].id,6).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));$('#price_table_12bln_'+bank_list[i].id).html(hitung_cicilan(harga,bank_list[i].id,12).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));$('#price_table_18bln_'+bank_list[i].id).html(hitung_cicilan(harga,bank_list[i].id,18).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));$('#price_table_24bln_'+bank_list[i].id).html(hitung_cicilan(harga,bank_list[i].id,24).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."));}}
function min_purchase(bank,bulan){if(terms[bank]==null||terms[bank][bulan]==null){return "-";}
var minimum=parseInt(terms[bank][bulan]["min_purchase"]);if(minimum>=0){return minimum;}else{return "-";}}
function hitung_cicilan(harga,bank,bulan){var base=1.5;if(terms[bank]&&terms[bank][bulan]!=null&&terms[bank][bulan]["percentage"]>=0){var current_rate=parseInt(terms[bank][bulan]["percentage"]);if(terms[bank][bulan]["percentage"]==0){harga_final=harga;}else{var harga_plus_base=parseInt(harga)+parseInt(harga*base/100);var harga_final=parseInt(harga_plus_base)+parseInt(harga_plus_base*bulan*current_rate/100);}
result=harga_final/bulan;return Math.ceil(result);}else{return "-";}}
function do_unfollow(){$(document).on('click','.stop-fav',function(){if(tokopedia.processAjax==0){var $ids=$(this).attr('id').split('_');var $data=new Object;$data.s_id=$ids[1];$data.action='fave_shop';$data.act='POST';$data.qs=qs;$data.uri_path=uri_path;$data.token=$('#token').val();$data.user_id=ads_auth.user_id;var $this=$(this);$.ajax({url:$url_action,global:false,type:"POST",data:($data),xhrFields:{withCredentials:true},dataType:"json",success:function(result){if(result.message_error){if(result.must_login){window.location='/login.pl';}
else{var message_error=tokopedia.render_message('error',result.message_error);tokopedia.alert('',message_error);}}},error:function(XMLHttpRequest,textStatus,errorThrown){},beforeSend:function(){tokopedia.processAjax++;tokopedia.show_ajax_loader();var favbtn_visit=$this.attr('id').replace('s_',"#go_s_");$this.hide();$(favbtn_visit).removeClass('hide');},complete:function(){tokopedia.remove_ajax_loader();tokopedia.processAjax=0;}});}
return false;});}
function init_ajax_get_product_stats_count(){if(parent_id&&parent_id!==0){product_stats_ajax_script=product_stats_ajax_script.replace(/pid=(\d+)/g,"pid="+parent_id);}
$.ajax({url:product_stats_ajax_script,global:false,type:"GET",dataType:"jsonp",jsonpCallback:'show_product_stats',contentType:"application/json",success:function(result){var item_sold_count=result.item_sold;var success_count=result.success;var reject_count=result.reject;if(item_sold_count){$('.item-sold-count').html(format_stats(item_sold_count));}
else{$('.item-sold-count').html(0);}
var success_percent=format_percent(success_count,success_count+reject_count);if(success_percent){$('.success-transaction-percent').html(success_percent);$('.all-transaction-count').html(format_stats(success_count+reject_count));}
else{$('.transaction-container').html("");}
$('.product-price-box').removeClass('mt-90');$('.product-price-box').addClass('mt-120');$('.transaction-container').removeClass('hide');},error:function(XMLHttpRequest,textStatus,errorThrown){$('.item-sold-count').html("0");$('.transaction-container').removeClass('hide');$('.transaction-container').html("");},beforeSend:function(){},complete:function(){}});}
function format_stats(stats){if(stats){comma_separator=(lang.thousand=="rb")?",":".";if(stats>=1000000){stats=Math.round(stats/100000.00).toString();first_string=stats.substr(0,stats.length-1);last_string=stats.substr(-1,1);last_string=(last_string!="0")?(comma_separator+last_string):"";stats=first_string+last_string+lang.million;}
if(stats>=1000){stats=Math.round(stats/100.00).toString();first_string=stats.substr(0,stats.length-1);last_string=stats.substr(-1,1);last_string=(last_string!="0")?(comma_separator+last_string):"";stats=first_string+last_string+lang.thousand;}}
return stats;}
function format_percent(dividend,divisor){var result;if(divisor>0){result=Math.round(dividend/divisor*10000)/100+"%";}
return result;}
function init_review_talk_count(){var p_id;if(parent_id&&parent_id!==0){p_id=parent_id;}else{var this_prod_id=$('.container-product').attr('id');var this_id_obj=this_prod_id.split('-');p_id=this_id_obj.pop();}
$.ajax({url:reputationapp_url+'review/api/v1/total/p/'+p_id,global:false,type:"GET",dataType:"json",success:function(result){if(result.message_error){var message_error=tokopedia.render_message('error',result.message_error);tokopedia.alert('',message_error);}else{var review_count_formatted=format_stats(result.data.review_count);$('.review-container').html($('.review-container').html()+' (<span class="bold">'+review_count_formatted+'</span>)');}},error:function(XMLHttpRequest,textStatus,errorThrown){$('.review-container').html($('.review-container').html()+' (<span class="bold">0</span>)');}});$.ajax({url:talk_url+'/talkcount/'+p_id,global:false,type:"GET",dataType:"json",xhrFields:{withCredentials:true},success:function(result){if(result.message_error){var message_error=tokopedia.render_message('error',result.message_error);tokopedia.alert('',message_error);}else{var talk_count_formatted=format_stats(result.talk_count);$('.talk-container').html($('.talk-container').html()+' (<span class="bold">'+talk_count_formatted+'</span>)');}},error:function(XMLHttpRequest,textStatus,errorThrown){$('.talk-container').html($('.talk-container').html()+' (<span class="bold">0</span>)');}});}
function sendGtmDataPDP(i){i=typeof i!=='undefined'?i-1:0;var itemName=['add fave','remove fave','send message',];window.dataLayer.push({"event":"clickProductPage","eventCategory":"product page","eventAction":"click shop info item","eventLabel":typeof itemName[i]==='undefined'?itemName[0]:itemName[i],});}
function init_fave_button(){var html_no_fave='<span class="va-middle fs-14"><i class="icon-plus-alt"></i></span>&nbsp;'+tokopedia.loc('Make Favorite');var html_fave='<i class="icon-checked"></i>&nbsp;'+tokopedia.loc('My Favorite Shop');$(document).on('click','#btn-favorit',function(){var data=new Object();var this_shop_id=$('#shop-id').val();data.s_id=this_shop_id;data.action='fave_shop';data.act='POST';data.token=$('#token').val();data.user_id=ads_auth.user_id;var fav_button=$('#btn-favorit');sendGtmDataPDP(fav_button.hasClass('btn-action')?1:2);window.dataLayer=window.dataLayer||[];if(fav_button.hasClass('btn-action')){dataLayer.push({event:'clickFavorite',eventAction:'addToFavorite',attributes:{is_official_store:moeAttr.is_official_store,shop_id:moeAttr.shop_id,shop_name:moeAttr.shop_name,shop_location:moeAttr.shop_location}});}else{dataLayer.push({event:'clickFavorite',eventAction:'removeFromFavorite',attributes:{is_official_store:moeAttr.is_official_store,shop_id:moeAttr.shop_id,shop_name:moeAttr.shop_name,shop_location:moeAttr.shop_location}});}
if(tokopedia.processAjax==0){$.ajax({url:url_action,global:false,type:"POST",data:(data),xhrFields:{withCredentials:true},dataType:"json",success:function(result){if(result.success){if(result.reload){location.reload();}
if(result.message_status){var message_status=tokopedia.render_message('status',result.message_status);}}
else{if(fav_button.hasClass('btn-action')){fav_button.removeClass('btn-action');fav_button.addClass('btn-second');fav_button.html(html_fave);}
else{fav_button.addClass('btn-action');fav_button.removeClass('btn-second');fav_button.html(html_no_fave);}
if(result.must_login){window.location='/login.pl';}
else{var message_error=tokopedia.render_message('error',result.message_error);tokopedia.alert('',message_error);}}},error:function(XMLHttpRequest,textStatus,errorThrown){tokopedia.alert_error();if(fav_button.hasClass('btn-action')){fav_button.removeClass('btn-action');fav_button.addClass('btn-second');fav_button.html(html_fave);}
else{fav_button.addClass('btn-action');fav_button.removeClass('btn-second');fav_button.html(html_no_fave);}},beforeSend:function(){tokopedia.process_ajax();if(fav_button.hasClass('btn-action')){fav_button.removeClass('btn-action');fav_button.addClass('btn-second');fav_button.html(html_fave);}
else{fav_button.addClass('btn-action');fav_button.removeClass('btn-second');fav_button.html(html_no_fave);}},complete:function(){tokopedia.processAjax=0;}});}});}
function log_atc(){var qs=$.parseQuery(location.search);var eventLabel="Buy";window.dataLayer=window.dataLayer||[];if(qs.src=="wish"){if(qs.type==1){eventLabel="Buy - Wishlist";}else if(qs.type==2){eventLabel="Buy - Wishlist Price Change";}}
dataLayer.push({'event':'clickBuy','eventCategory':'Product Detail Page','eventAction':"Click",'eventLabel':eventLabel});var tracking_url=parse_trkid();var source="";var label="";if(tracking_url.source){source=tracking_url.source;}
if(tracking_url.label){label=tracking_url.label;}
dataLayer.push({'event':'clickBuy','eventCategory':'Product Detail Page','eventAction':"Buy - "+source,'eventLabel':label});dataLayer.push({event:'added_to_cart_product',eventAction:'addToCart',attributes:{subcategory:moeAttr.subcategory,subcategory_id:moeAttr.subcategory_id,category:moeAttr.category,category_id:moeAttr.category_id,product_name:moeAttr.product_name,product_id:moeAttr.product_id,product_url:moeAttr.product_url,product_price:moeAttr.product_price,is_official_store:moeAttr.is_official_store,quantity:($('#total-item-cart').length>0)?parseInt($('#total-item-cart').text()):0}});if(typeof tracking_url.ref!="undefined"){var nref=tracking_url.ref;var split_nref=nref.split("--");if(typeof split_nref[0]!="undefined"&&split_nref[0]=="hotpersona"){var hotName=split_nref[1].replace(/-/g," ");dataLayer.push({'event':'BuyHotlist','eventCategory':'Product Detail Page','eventAction':"Click Buy",'eventLabel':"Page:Product Detail Page - Type:Hotlist with Personalization - Name:"+hotName});}}
var active_variant=product_variant.children.find(function(element){var elem_id=$('.container-product').attr('id');var arr_elem_id=elem_id.split('-');var p_id=arr_elem_id.pop();if(element.product_id==p_id){return element;}});var active_variant_options;if(active_variant&&active_variant.option_ids){active_variant_options=active_variant.option_ids;}
var variant_selected="";if(typeof product_variant!="undefined"&&product_variant&&product_variant.variant&&active_variant_options){var variant_selected_array=[];for(var i=0;i<active_variant_options.length;i++){var curr_variant_identifier=product_variant.variant[i].identifier;var curr_variant_option=product_variant.variant[i].option.find(function(element){if(element.id==active_variant_options[i]){return element;}});if(curr_variant_identifier.length>0&&curr_variant_option){variant_selected_array.push(curr_variant_identifier+":"+curr_variant_option.value);}}
variant_selected=variant_selected_array.join(",")}else{variant_selected="non variant";}
window.dataLayer.push({"event":"clickProductPage","eventCategory":"product detail page","eventAction":"click - buy","eventLabel":moment().format('YYYY-MM-DD HH:mm:ss')+"-"+variant_selected});}
function parse_trkid(){var trkidStr=get_trkid_str();var trkid={};var obj={};if(trkidStr){var trkid_arr=decodeURIComponent(trkidStr).split("_");for(var i=0;i<trkid_arr.length;i++){splitted=trkid_arr[i].split("=");trkid[splitted[0]]=splitted[1];}
obj.ref=trkid.ref;obj.source=trkid.src;obj.label="pa="+trkid.page+" - po="+trkid.po+" - ob="+trkid.ob+" - catid="+trkid.catid+" - f="+trkid.f+" - q="+trkid.q;}
return obj;}
function get_trkid_str(){var queryKey=parseUri(window.location.href).queryKey;return queryKey.trkid;}
function show_dialog_new_message(friend_id,subject){tokopedia.dialog_ajax('/ajax/people-4.pl?action=show_dialog_new_message&friend_id='+friend_id+'&subject='+subject+'&aws=1&shop=1',function(){var product_url=$('#product-url').val();$('#message').val("\n\nlink produk: "+product_url);});return false;}
function event_dialog_new_message(form){var data_info=$(form).serializeObject();var click_name=tokopedia.click_name;if(click_name=='submit'){data_info.action='send_new_message';}
data_info.captcha=1;var default_submit_name=$("button[value=submit] span",form).html();if(tokopedia.processAjax==0){$.ajax({url:form.action,global:false,type:"POST",data:(data_info),dataType:"json",success:function(result){if(result.message_error){var message_error=tokopedia.render_message('error',result.message_error);tokopedia.dialog_set_message(message_error);captcha_reload();if(result.reload){$(".jqmClose").click(function(){window.location.reload();});}}
else if(result.success){if(result.message_status){var message_status=tokopedia.render_message('status',result.message_status);tokopedia.alert('New Message',message_status);}}
else{tokopedia.alert_error();}},error:function(XMLHttpRequest,textStatus,errorThrown){tokopedia.alert_error();},beforeSend:function(){tokopedia.processAjax++;$("button[value=submit] span",form).html("Loading...");},complete:function(){tokopedia.processAjax=0;$("button[value=submit] span",form).html(default_submit_name);}});}
return false;}
function init_promo_widget(){var dt=new Object();dt.user_id=ads_auth.user_id;dt.device_type="default_v3";dt.placeholder="pdp_widget";dt.lang=tokopedia.loc("lang");dt.shop_id=window.shop_id?window.shop_id:$("#shop-id").val();var target_type;var ck_target_type;var ck_shop_type;if(ads_auth.user_id){if(ads_auth.shop_id){if(user_gold_merchant&&user_gold_merchant=="1"){target_type="gold_merchant";ck_target_type="gm";}else{target_type="merchant";ck_target_type="m";}
dt.shop_id=ads_auth.shop_id;}else{target_type="login_user";ck_target_type="u";}}else{target_type="guest";ck_target_type="g";}
dt.target_type=target_type;var is_official=!!$("#is_official").val();dt.shop_type=is_official?'os':'merchant';ck_shop_type=is_official?'o':'m';var cookie_key_prefix="prm2_";var cookie_name=cookie_key_prefix+dt.user_id+"_"+ck_target_type+"_"+ck_shop_type+"_"+dt.lang;var get_cookie_size=function(){if(document&&document.cookie){return encodeURIComponent(document.cookie).length;}
return null;};var promo_cookie=Cookies.getJSON(cookie_name);if(promo_cookie){append_promo_widget(promo_cookie);return;}
$.ajax({url:host_galadriel+'/promo-suggestions/v1/widget',global:false,type:"GET",data:(dt),dataType:"json",success:function(result){var promos=[];if(result&&result.data&&result.data.list&&result.data.list.length>0){promos=[result.data.list[0]];append_promo_widget(promos);}
var expired_second=180;if(result.data&&result.data.cache_expire){expired_second=result.data.cache_expire;}
var expired_date=new Date(new Date().getTime()+expired_second*1000);var cookies=Cookies.get();var compare_prefix_against=cookie_key_prefix+dt.user_id+"_";for(var key in cookies){var cookie=cookies[key];if(key.substr(0,cookie_key_prefix.length)==cookie_key_prefix&&key.substr(0,compare_prefix_against.length)!=compare_prefix_against){Cookies.remove(key);}}
var cookie_size=get_cookie_size();var estimated_additional_cookie_length=cookie_name.length+encodeURIComponent(JSON.stringify(promos)).length+50;var estimated_max_cookie_size=4000;if(cookie_size!==null&&(cookie_size+estimated_additional_cookie_length)>=estimated_max_cookie_size){cookies=Cookies.get();for(var key in cookies){var cookie=cookies[key];if(key.substr(0,cookie_key_prefix.length)==cookie_key_prefix){Cookies.remove(key);}}}
cookie_size=get_cookie_size();if(cookie_size!==null&&(cookie_size+estimated_additional_cookie_length)<estimated_max_cookie_size){Cookies.set(cookie_name,promos,{expires:expired_date});}},error:function(XMLHttpRequest,textStatus,errorThrown){},beforeSend:function(){},complete:function(){}});}
function append_promo_widget(promos){if(!promos||!$.isArray(promos)||promos.length<1){return;}
var promo=promos[0];var promo_attributes=promo.attributes;if(!promo_attributes){return;}
var promo_html='<div class="product-box">'+
'<div class="product-box-header"><h4>PROMO</h4></div>'+
'<div class="product-box-content"><div class="pr-10 pl-10">'+
'<div class="pull-left">'+
'<div class="pull-left mr-5">'+
'<img src="'+icon_promo+'" alt="" class="mt-5" width="25">'+
'</div>'+
'<div class="pull-left post-box-content__place">'+
'<div class="fs-11 postbox-content-voucher__header"><a target="_blank" class="promo-link" href="'+promo_attributes.target_url+'">'+promo_attributes.short_desc+'</a></div>'+
'<div class="postbox-content-voucher__small fs-11">'+promo_attributes.short_cond+'</div>'+
'</div>'+
'</div>'+
'<div class="postbox-content-voucher">'+
'<input class="promo-code postbox-content-voucher_input" readonly="" type="text" value="'+promo_attributes.code+'"/>'+
'<button class="btn-save-promo btn btn-ghost postbox-content-voucher__btn">'+tokopedia.loc("Copy")+" "+tokopedia.loc("Code")+'</button>'+
'</div>'+
'</div></div>'+
'</div>';$(".btn-atc-block").last().after(promo_html);window.dataLayer=window.dataLayer||[];var promotions={id:$('#product-id').val(),name:'/product - promo widget',creative:promo_attributes.short_desc,creative_url:promo_attributes.target_url,position:'PDP - Widget',promo_code:promo_attributes.code}
if(promo.hasOwnProperty('id')&&promo.id!==''){promotions.promo_id=promo.id;}
dataLayer.push({event:'promoView',ecommerce:{promoView:{promotions:[promotions]}}});$('.promo-link').on('click',()=>{dataLayer.push({event:'promoClick',ecommerce:{promoClick:{promotions:[{id:promo.id,name:'/product - promo widget',position:'PDP - Widget',creative:promo_attributes.short_desc,creative_url:promo_attributes.target_url,promo_code:promo_attributes.code}]}}})});$(".btn-save-promo").click(function(){var checklist_icon='<i class="icon-checked green"></i>';var text_area=$('.promo-code').get(0);text_area.select();try{var success=document.execCommand("copy");var msg=success?"success":"failed";if(success){$(this).text(" "+tokopedia.loc("Copied")).addClass('copied').prepend(checklist_icon);text_area.blur();}}catch(e){}
ga('send',{hitType:'event',eventCategory:'pdp promo widget - promo',eventAction:'user click on copy code',eventLabel:promo_attributes.code});});}
function init_variant(){var url_variant=host_tome+"/v2/product/"+product_id+"/variant";$.ajax({url:url_variant,async:false,xhrFields:{withCredentials:true,},type:'GET',dataType:'json'}).done(function(data){if(data.data){product_variant=data.data;if(product_variant.variant!=undefined){product_variant.children.map(({campaign})=>{if(campaign.is_active&&campaign.end_date!=''){campaign.end_date=moment(campaign.end_date,"DD-MM-YYYY HH:mm:ss").format("YYYY-MM-DD HH:mm:ss");}})}
init_variant_thumbnail();init_xzoom();if(product_variant.variant!=undefined){deleteSetEmpty(product_variant.variant.length);build_variant_selection(product_variant);}
if(product_variant.sizechart!=undefined&&product_variant.sizechart!=""){build_variant_sizechart(product_variant.sizechart);}
product_variant.brand=product_brand;}}).always(function(){if(typeof product_variant=='undefined'||product_variant.variant==undefined||product_variant.variant.length==0){if(typeof checkCampaign=='function'){var PID=$('input[name="product_id"]').val();checkCampaign(PID);}}
init_ajax_get_product_view_count();init_review_talk_count();init_ajax_get_product_stats_count();}).fail(()=>{});}
function init_variant_thumbnail(){if(product_variant.variant!=undefined&&product_variant.variant.length>0){var first_option=product_variant.variant[0].option;var primary_picture=$('.product-imagethumb-alt ul').find('li.primary a');var primary_picture_href=primary_picture.attr('href');for(var i=0;i<first_option.length;i++){if(first_option[i].picture&&first_option[i].picture.original&&first_option[i].picture.original!=""){if(primary_picture_href===first_option[i].picture.original){primary_picture.addClass("pvo-img").addClass("pvo-img-"+first_option[i].id);}
else{$('.product-imagethumb-alt ul').append(`
                        <li class="pvo-img pvo-img-${first_option[i].id}">
                            <a href="${first_option[i].picture.original}" data-colorbox-href="${first_option[i].picture.original}" onclick="return false;">
                                <img itemprop="image" src="${first_option[i].picture.thumbnail}"
                                xpreview="${first_option[i].picture.original}"
                                alt="${first_option[i].name}" 
                                class="prod-img-thumb"/>
                            </a>
                        </li>
                    `);}}}
init_gallery();}}
function init_xzoom(){$("#prod-img-primary, .prod-img-thumb").xzoom({Xoffset:20,position:'right',activeClass:'thumb-active',zoomWidth:460,zoomHeight:372,defaultScale:0.5,scroll:false,adaptive:false});}
var variant_level=0;var var_data={};function build_variant_selection(data){variant_level=Object.keys(product_variant.variant).length;parent=data.parent_id;if(data.children!=undefined){if(variant_level==1){for(key in data.children){var_data[data.children[key].option_ids[0].toString()]=1;}}else if(variant_level==2){for(key in data.children){var temp_opt=Array();for(opts in data.children[key].option_ids){temp_opt[opts]=data.children[key].option_ids[opts].toString();}
if(var_data[temp_opt[0]]==undefined){var_data[temp_opt[0]]={};}
if(var_data[temp_opt[1]]==undefined){var_data[temp_opt[1]]={};}
var_data[temp_opt[0]][temp_opt[1]]=1;var_data[temp_opt[1]][temp_opt[0]]=1;}}}
if(data.variant.length>0){$(".product-variants-holder").removeClass('hide');}
var v_option=data.variant;$('#product-variant-container').html('');for(pos in v_option){var variant=v_option[pos];var variant_selection_html='';for(i in variant.option){var opt=variant.option[i];if(var_data[opt.id]!=undefined){variant_selection_html+='<div class="variant" data-position='+pos+' data-pvo-id="'+opt.id+'">'+opt.value+'</div>';}}
var variant_html=''+
'<div class="variant-selected">'+tokopedia.loc(variant.identifier)+': <strong class="selected-variant" data-position="'+pos+'"></strong></div>'+
'<div class="all-variants" data-position="'+pos+'">'+
variant_selection_html+
'</div>';$('#product-variant-container').append(variant_html);}
clickVariants();select_first_variant(data);}
function deleteSetEmpty(variantlength){var setEmptyExist=$('#move-to-warehouse').length;if(variantlength>0&&setEmptyExist>0){$('#move-to-warehouse').remove();}
var toPrevEtalaseExist=$('#to-prev-etalase').length;if(variantlength>0&&toPrevEtalaseExist>0){$('#to-prev-etalase').remove();}
var toEtalaseExist=$('#to-etalase').length;if(variantlength>0&&toEtalaseExist>0){$('#to-etalase').remove();}}
function select_first_variant(data){if(data.parent_id==p_id){var default_child=data.default_child;if(default_child!=null&&default_child!=0){for(var index in data.children){var child=data.children[index];if(child.product_id==default_child){for(var i=0;i<child.option_ids.length;i++){if(child.enabled){$('.all-variants[data-position="'+i+'"] .variant[data-pvo-id="'+child.option_ids[i]+'"]:not(.disabled)').trigger('click');}else{$('.all-variants[data-position="'+i+'"] .variant[data-pvo-id="'+child.option_ids[i]+'"]').addClass("disabled");GenerateVariantOptions(i,child.option_ids[i],true);}}
if(!child.enabled){variantContentChanges(child);}
return;}}}
for(var i=0;i<=variant_level;i++){$('.all-variants[data-position="'+i+'"] .variant:not(.disabled)').first().trigger('click');}}else{for(var element in data.children){if(data.children[element].product_id==p_id){for(var i=0;i<=variant_level;i++){if(!data.children[element].enabled){if(i==0){var active_child=data.children.find(function(val){return val.option_ids[0]==data.children[element].option_ids[i]&&val.enabled;});if(typeof active_child=='undefined'){$('.all-variants[data-position="0"] .variant[data-pvo-id="'+data.children[element].option_ids[i]+'"]').addClass("disabled");}}else if(i==1){$('.all-variants[data-position="1"] .variant').addClass("disabled");}
GenerateVariantOptions(i,data.children[element].option_ids[i],true);}else{$('.all-variants[data-position="'+i+'"] .variant[data-pvo-id="'+data.children[element].option_ids[i]+'"]:not(.disabled)').trigger('click');}}
break;}}}}
function clickVariants(){var productLastHit=0;var needChanges=0;var tempSummary={};var clickHandler=function(){$('body').on('click','.variant',function(){var select_icon="<div class='select-icon'><i class='icon-checked-alt'></i></div>";var cur_position=$(this).attr('data-position');var cur_pvo_id=$(this).attr('data-pvo-id');if(!$(this).hasClass('active')&&!$(this).hasClass('disabled')){$(this).siblings('.variant.active').removeClass('active').children('.select-icon').remove();$(this).addClass('active').append(select_icon).trigger('selectedVariant');var variant_value=$(this).text();$('strong.selected-variant[data-position="'+cur_position+'"]').html(variant_value);$('.all-variants[data-position!="'+cur_position+'"] .variant').removeClass('disabled');GenerateVariantOptions(cur_position,cur_pvo_id,false);}
if(cur_position==0){var selected_variant=product_variant.variant[0].option.find(function(element){return element.id==cur_pvo_id;});if(selected_variant.picture&&selected_variant.picture.original&&selected_variant.picture.original!=""){$('.pvo-img-'+cur_pvo_id+' img').click();}}
var id_lvl0=$(".variant.active[data-position=0]").data("pvo-id");var id_lvl1=$(".variant.active[data-position=1]").data("pvo-id");if(variant_level==2){if(id_lvl0!=undefined&&id_lvl1!=undefined){for(i in product_variant.children){if(product_variant.children[i].option_ids[0]==id_lvl0&&product_variant.children[i].option_ids[1]==id_lvl1){product_id=product_variant.children[i].product_id;$('input#product-id').val(product_id);$('.container-product').attr('id','product-'+product_id);if(product_variant.children[i].enabled!=false){if($("#btn-atc").hasClass("disabled")){$("#btn-atc").removeClass("disabled");$("#btn-atc").html('<i class="icon-shopping-cart yellow icon-large mr-10"></i>'+tokopedia.loc("Buy"));}
needChanges=1;sendGTMVariantClick($(this));}
break;}else if(product_variant.children[i].option_ids[0]==id_lvl1&&product_variant.children[i].option_ids[1]==id_lvl0){product_id=product_variant.children[i].product_id;$('input#product-id').val(product_id);$('.container-product').attr('id','product-'+product_id);if(product_variant.children[i].enabled!=false){if($("#btn-atc").hasClass("disabled")){$("#btn-atc").removeClass("disabled");$("#btn-atc").html('<i class="icon-shopping-cart yellow icon-large mr-10"></i>'+tokopedia.loc("Buy"));}
needChanges=1;sendGTMVariantClick($(this));}
break;}}}}else if(variant_level==1){if(id_lvl0!=undefined){for(i in product_variant.children){if(product_variant.children[i].option_ids[0]==id_lvl0){product_id=product_variant.children[i].product_id;$('input#product-id').val(product_id);$('.container-product').attr('id','product-'+product_id);if(product_variant.children[i].enabled!=false){if($("#btn-atc").hasClass("disabled")){$("#btn-atc").removeClass("disabled");$("#btn-atc").html('<i class="icon-shopping-cart yellow icon-large mr-10"></i>'+tokopedia.loc("Buy"));}
needChanges=1;sendGTMVariantClick($(this));}
break;}}}}
if(product_id!=undefined&&needChanges==1){if(product_id!=productLastHit){variantContentChanges(product_variant.children[i]);init_wishlist();productLastHit=product_id;}
needChanges=0;}});}
clickHandler();}
function GenerateVariantOptions(cur_position,cur_pvo_id,first_select){if(variant_level==2){if(cur_position==0&&!first_select){$('.all-variants[data-position!="'+cur_position+'"] .variant:not(.disabled)').first().trigger('click');$.each($('.all-variants[data-position!="'+cur_position+'"] .variant'),function(index,val){var pvo_id=$(val).attr('data-pvo-id');if(var_data[cur_pvo_id]==undefined||var_data[cur_pvo_id][pvo_id]==undefined){$(val).addClass('disabled');if($(val).hasClass('active')){$(val).removeClass('active').children('.select-icon').remove();$('.all-variants[data-position!="'+cur_position+'"] .variant:not(.disabled)').first().trigger('click');}}
for(i in product_variant.children){if((product_variant.children[i].option_ids[0]==pvo_id&&product_variant.children[i].option_ids[1]==cur_pvo_id)||(product_variant.children[i].option_ids[0]==cur_pvo_id&&product_variant.children[i].option_ids[1]==pvo_id)){if(product_variant.children[i].enabled==false){$(val).addClass('disabled');if($(val).hasClass('active')){$(val).removeClass('active').children('.select-icon').remove();$('.all-variants[data-position!="'+cur_position+'"] .variant:not(.disabled)').first().trigger('click');break;}}}}});}
var hasChild={};var childStockEmtpy={};for(i in product_variant.children){if(hasChild[product_variant.children[i].option_ids[0]]==undefined){hasChild[product_variant.children[i].option_ids[0]]=1;}else{hasChild[product_variant.children[i].option_ids[0]]+=1;}
if(childStockEmtpy[product_variant.children[i].option_ids[0]]==undefined){childStockEmtpy[product_variant.children[i].option_ids[0]]=0;}
if(product_variant.children[i].enabled==false&&childStockEmtpy[product_variant.children[i].option_ids[0]]!=undefined){childStockEmtpy[product_variant.children[i].option_ids[0]]+=1;}}
$.each($('.all-variants[data-position="'+0+'"] .variant'),function(index,val){var pvoId=$(val).attr('data-pvo-id');if(var_data[pvoId]==undefined||hasChild[pvoId]<=childStockEmtpy[pvoId]){$(val).addClass('disabled');if($(val).hasClass('active')){$(val).removeClass('active').children('.select-icon').remove();$('.all-variants[data-position="'+0+'"] .variant:not(.disabled)').first().trigger('click');$('.all-variants[data-position="'+1+'"] .variant:not(.disabled)').first().trigger('click');}}});}else if(variant_level==1&&cur_position==0){$.each($('.all-variants[data-position="'+cur_position+'"] .variant'),function(index,val){var pvo_id=$(val).attr('data-pvo-id');if(var_data[pvo_id]==undefined){$(val).addClass('disabled');if($(val).hasClass('active')){$(val).removeClass('active').children('.select-icon').remove();$('.all-variants[data-position="'+cur_position+'"] .variant:not(.disabled)').first().trigger('click');}}
for(i in product_variant.children){if(product_variant.children[i].option_ids[0]==pvo_id){if(product_variant.children[i].enabled==false){$(val).addClass('disabled');if($(val).hasClass('active')){$(val).removeClass('active').children('.select-icon').remove();$('.all-variants[data-position="'+cur_position+'"] .variant:not(.disabled)').first().trigger('click');}}}}});}}
function sendGTMVariantClick(clickedVariant){if(product_variant&&product_variant.variant){var curr_variant_position=clickedVariant.attr("data-position");var curr_variant_text=clickedVariant.text();if(curr_variant_position.length>0&&curr_variant_text.length>0){var eventLabel=product_variant.variant[curr_variant_position].identifier+"-"+curr_variant_text;window.dataLayer.push({"event":"clickProductPage","eventCategory":"product detail page","eventAction":"click - variants","eventLabel":eventLabel});}}}
function variantContentChanges(data){var promoIsOver=moment().isAfter(data.campaign.end_date)
var cashback_percent=$("input#cashback-percent").val();if(data.campaign.is_active){if(!promoIsOver){var campaign_data={original_price_idr:data.campaign.original_price_fmt,percentage_amount:data.campaign.discounted_percentage,end_date:data.campaign.end_date,campaign_type_name:data.campaign.campaign_type_name};buildCampaignLayout(campaign_data);$(".product-discounted-pricetag").find(".bold[itemprop='price']").text(convertToRupiahFormat(data.campaign.discounted_price));$("input#product_price_int").val(data.campaign.discounted_price);if(cashback_percent){$("#cashback-value").text("Rp "+convertToRupiahFormat(calculateCashback(data.campaign.discounted_price,cashback_percent)));}}else{$(".product-discounted-pricetag,.product-pricetag").find(".bold[itemprop='price']").text(convertToRupiahFormat(data.campaign.original_price));$("input#product_price_int").val(data.campaign.original_price);if(cashback_percent){$("#cashback-value").text("Rp "+convertToRupiahFormat(calculateCashback(data.campaign.original_price,cashback_percent)));}}
if(data.campaign.campaign_type_name){$("#wholesale").addClass("hide");}}else{removeCampaign();$(".product-discounted-pricetag,.product-pricetag").find(".bold[itemprop='price']").text(convertToRupiahFormat(data.price));$("input#product_price_int").val(data.price);if(cashback_percent){$("#cashback-value").text("Rp "+convertToRupiahFormat(calculateCashback(data.price,cashback_percent)));}
$("#wholesale").removeClass("hide");}
$(".p_title[itemprop=name]").text(data.name);$(".p_title[itemprop=name]").attr("href",data.url);var title_share=data.name;var hashtags=$('#twitter-hash-tags').val();var url=data.url;if(data.url!=""||data.url!=undefined){var urlProduct=data.url;var pathSplit=urlProduct.split("/");var pathToPush="";if(pathSplit.length>=2){pathToPush="/"+pathSplit[pathSplit.length-2]+"/"+pathSplit[pathSplit.length-1]+window.location.search;var variant_document_title="Jual "+data.name+" - "+shop_name+" | Tokopedia";History.replaceState(null,variant_document_title,pathToPush);var reviewURL=domain_url+"/"+pathSplit[pathSplit.length-2]+"/"+pathSplit[pathSplit.length-1]+"/review"+window.location.search;$('#p-nav-review a').attr("href",reviewURL);var talkURL=domain_url+"/"+pathSplit[pathSplit.length-2]+"/"+pathSplit[pathSplit.length-1]+"/talk"+window.location.search;$('#p-nav-talk a').attr("href",talkURL);}}
init_installment();if(data.enabled){$(".alert-block-not-available").hide();}}
function calculateCashback(price,cashback_percent){var price_int=parseInt(price);var cashback_percent_int=parseInt(cashback_percent);var cashback_value=(price*cashback_percent_int)/100;return Math.floor(cashback_value).toString();}
function convertToRupiahFormat(input)
{var rupiah='';var angkarev=input.toString().split('').reverse().join('');for(var i=0;i<angkarev.length;i++)if(i%3==0)rupiah+=angkarev.substr(i,3)+'.';return rupiah.split('',rupiah.length-1).reverse().join('');}
function build_variant_sizechart(image_url){var sizechart_html=''+
'<a href="#" class="size-chart">'+tokopedia.loc('size_chart')+'</a>'+
'<div class="size-chart-content">'+
'<img class="size-chart-img" src="'+image_url+'" />'+
'</div>';$('#product-variant-container').append(sizechart_html);$panduan=$('.size-chart-content').colorbox({transition:'none',width:"70%",height:"80%",initialWidth:"700",initialHeight:"700",photo:true,fixed:true,href:image_url,});$('body').on('click','.size-chart',function(e){e.preventDefault();$panduan.click();});}
function init_ajax_get_product_view_count(){if(parent_id&&parent_id!==0){product_view_ajax_script=product_view_ajax_script.replace(/pid=(\d+)/g,"pid="+parent_id);}
$.ajax({url:product_view_ajax_script,global:false,type:"GET",dataType:"jsonp",jsonpCallback:'show_product_view',contentType:"application/json",success:function(result){if(result.view){comma_separator=(lang.thousand=="rb")?",":".";viewcount=result.view;if(viewcount>=1000000){viewcount=Math.round(viewcount/100000.00).toString();first_string=viewcount.substr(0,viewcount.length-1);last_string=viewcount.substr(-1,1);last_string=(last_string!="0")?(comma_separator+last_string):"";viewcount=first_string+last_string+lang.million;}
if(viewcount>=1000){viewcount=Math.round(viewcount/100.00).toString();first_string=viewcount.substr(0,viewcount.length-1);last_string=viewcount.substr(-1,1);last_string=(last_string!="0")?(comma_separator+last_string):"";viewcount=first_string+last_string+lang.thousand;}
$('.view-count').html(viewcount);}
else{$('.view-count').html("1");}},error:function(XMLHttpRequest,textStatus,errorThrown){$('.view-count').html("1");},beforeSend:function(){},complete:function(){}});}